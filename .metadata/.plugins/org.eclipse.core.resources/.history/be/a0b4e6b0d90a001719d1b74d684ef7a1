package communicater;

import gui.Gui;
import gui.StatusFlag;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Properties;

public final class Dictionaries {
	
	static Properties prop = new Properties();
	static File configFile;
	static FileReader reader;
	static FileWriter writer;
	static String fileName = "ServerConfig.properties";
	
	public static String 
		SEND_INFO = "SEND_INFO",
		CLOSE_CONNECTION = "CLOSE_CONNECTION",
		SHUT_DOWN = "SHUT_DOWN",
		LOCK_ALL = "LOCK_ALL",
		SEND_FILE = "SEND_FILE",
		ONLINE = "ONLINE",
		OFFLINE = "OFFLINE",
		ERROR = "ERROR",
		DICTIONARY = 8,
		FILE_NAME = 9,
		FILE_INFO = 10,
		FILE_CONTENT = 11,
		KEEP_ALIVE = 12;
	static HashMap values = new HashMap();
	static HashMap defaultValues = new HashMap(){//静态初始化默认值
		put("SEND_INFO")
	};
	

	
	public static boolean setup(){
		Gui.log("Loading dictionaries.");
		StatusFlag.setIsPending();
		try{
			configFile = new File("ServerConfig.properties");//打开文件
			if(!configFile.exists()){
				Gui.log("File:"+fileName+"do not found, creating it with default...");
				writer = new FileWriter("ServerConfig.properties");
				writer.close();
				writer = null;
				reader = new FileReader(configFile);//设置读取
				fillDefault();
				return true;
			}
			else{
				Gui.log("File:"+fileName+" found, reading config...");
				reader = new FileReader(configFile);
				fillDefault();
			}
			prop.load(reader);//设置配置文件
			reader.close();
			readFromFile();
			return true;
		}
		catch (Exception e) {
			Gui.displayException(new Exception("Dictionary load error!: "+e.getMessage()));
			return false;
		}
		//prop.setProperty("SEND_INFO", prop.getProperty("SEND_INFO"));
	}
	
	public static boolean fillDefault(){
		
		return true;
	}
	
	public static boolean readFromFile(){
		
		return true;
	}
}
